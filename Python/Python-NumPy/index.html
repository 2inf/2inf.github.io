<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content=""><title>Python科学计算-NumPy | 2inf</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/normalize/8.0.1/normalize.min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/1.0.1/pure-min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/1.0.1/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.jsdelivr.net/npm/jquery/dist/jquery.min.js"></script><link rel="icon" mask="" sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><!-- modified--><link rel="stylesheet" type="text/css" href="/css/atom-one-dark.min.css?v=0.0.0"><script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.0.3/highlight.min.js"></script><!----><link rel="alternate" type="application/atom+xml" href="/atom.xml"><script type="text/javascript" src="//cdn.jsdelivr.net/npm/clipboard/dist/clipboard.min.js"></script><script type="text/javascript" src="//cdn.jsdelivr.net/gh/codeseven/toastr/build/toastr.min.js"></script><link rel="stylesheet" href="//cdn.jsdelivr.net/gh/codeseven/toastr/build/toastr.min.css"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">Python科学计算-NumPy</h1><a id="logo" href="/.">2inf</a><p class="description">2inf's blog</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/tags/"><i class="fa fa-tags"> 标签</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-4-4"><div class="content_container"><div class="post"><h1 class="post-title">Python科学计算-NumPy</h1><div class="post-meta">2020-05-31<span> | </span><span class="category"><a href="/categories/Python/">Python</a></span></div><!--if page.toc--><!--  div(class='clear')--><!--    div(id='toc' class='toc-article')--><!--      div(class='toc-title')= __('contents')--><!--      != toc(page.content, {list_number: theme.toc_number})--><div class="post-content"><p>参考文献:</p>
<ol type="1">
<li><p><a href="https://numpy.org/doc/stable/reference/index.html" target="_blank" rel="noopener">NumPy Reference</a></p></li>
<li><p><a href="https://numpy.org/doc/stable/user/index.html" target="_blank" rel="noopener">NumPy User Guide</a></p></li>
<li><p><a href="https://cs231n.github.io/python-numpy-tutorial/" target="_blank" rel="noopener">Python Numpy Tutorial (with Jupyter and Colab)</a></p></li>
<li><p><a href="https://www.runoob.com/numpy/numpy-tutorial.html" target="_blank" rel="noopener">菜鸟教程</a></p></li>
</ol>
<hr>
<p>  我们知道 Python 用 list 结构保存一组值，可以当作数组用，列表的元素可以是任何对象，因此列表中保存的是对象的指针。对数值运算而言，这种结构比较耗费内存和CPU。此外还有 array 模块，能直接保存数值，但不支持多维数组，也没有各种运算函数，也不适合做数值运算。</p>
<p>  NumPy 的诞生弥补了这些不足，它提供 ndarray(n-dimensional array object) 和 ufunc(universal function object) 两种基本对象。以下为本文的导入方式和 NumPy 版本号:</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np</span><br><span class="line"><span class="hljs-meta">&gt;&gt;&gt; </span>np.__version__</span><br><span class="line"><span class="hljs-string">'1.16.4'</span></span><br></pre></td></tr></table></figure>
<h1 id="ndarray-对象">ndarray 对象</h1>
<h2 id="创建">创建</h2>
<p>  通过给 array()函数传递 Python 的序列对象来创建数组。</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">&gt;&gt;&gt; </span>a = np.array([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>])</span><br><span class="line"><span class="hljs-meta">&gt;&gt;&gt; </span>b = np.array((<span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>))</span><br><span class="line"><span class="hljs-meta">&gt;&gt;&gt; </span>c = np.array([[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>], [<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>], [<span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>, <span class="hljs-number">10</span>]])</span><br></pre></td></tr></table></figure>
<p>  数组的形状通过 shape 属性获得 它是一个描述数组各个轴的长度的元组(tuple):</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">a.shape b.shape c.shape</span><br><span class="line">(<span class="hljs-number">4</span>,)    (<span class="hljs-number">4</span>,)    (<span class="hljs-number">3</span>,<span class="hljs-number">4</span>)</span><br></pre></td></tr></table></figure>
<p>  下面的例子将数组c 的 shape 属性改为(4,3)，并不是对数组进行转置，而是改变每个轴大小，数组元素在内存中的位置并没有改变。此外，当设置某个轴元素个数为-1时，将自动计算此轴长度。</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">&gt;&gt;&gt; </span>c.shape = <span class="hljs-number">4</span>, <span class="hljs-number">3</span></span><br><span class="line"><span class="hljs-meta">&gt;&gt;&gt; </span>c</span><br><span class="line">array([[ <span class="hljs-number">1</span>,  <span class="hljs-number">2</span>,  <span class="hljs-number">3</span>],</span><br><span class="line">       [ <span class="hljs-number">4</span>,  <span class="hljs-number">4</span>,  <span class="hljs-number">5</span>],</span><br><span class="line">       [ <span class="hljs-number">6</span>,  <span class="hljs-number">7</span>,  <span class="hljs-number">7</span>],</span><br><span class="line">       [ <span class="hljs-number">8</span>,  <span class="hljs-number">9</span>, <span class="hljs-number">10</span>]])</span><br></pre></td></tr></table></figure>
<p>  使用数组的 reshape()方法，可以创建指定形状的新数组，而原数组形状保持不变。数组 a 和 d 共享数据存储空间，修改任意一个数组元素会同时修改另一个数组的内容。</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">&gt;&gt;&gt; </span>d = a.reshape(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>)</span><br><span class="line"><span class="hljs-meta">&gt;&gt;&gt; </span>a[<span class="hljs-number">1</span>] = <span class="hljs-number">100</span></span><br><span class="line">     d             a</span><br><span class="line">------------ --------------</span><br><span class="line">[[  <span class="hljs-number">1</span>, <span class="hljs-number">100</span>], [<span class="hljs-number">1</span>, <span class="hljs-number">100</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>]</span><br><span class="line"> [  <span class="hljs-number">3</span>,   <span class="hljs-number">4</span>]]</span><br></pre></td></tr></table></figure>
<h2 id="元素类型">元素类型</h2>
<p>  数组的元素类型可以通过 dtype 属性获得。</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">&gt;&gt;&gt; </span>c.dtype</span><br><span class="line">dtype(<span class="hljs-string">'int32'</span>)</span><br></pre></td></tr></table></figure>
<p>  可以通过 dtype 参数在创建数组时指定元素类型，注意 float 是 64 位的双精度浮点类型，complex 是 128 位的双精度复数类型。</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">&gt;&gt;&gt; </span>ai32 = np.array([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>], dtype=np.int32)</span><br><span class="line"><span class="hljs-meta">&gt;&gt;&gt; </span>af = np.array([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>], dtype=float)</span><br><span class="line"><span class="hljs-meta">&gt;&gt;&gt; </span>ac = np.array([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>], dtype=complex)</span><br><span class="line">ai32.dtype af.dtype ac.dtype</span><br><span class="line">int32      float64  complex128</span><br></pre></td></tr></table></figure>
<p>  在需要指定 dtype 参数时，也可以传递一个字符串来表示元素的数值类型。NumPy 中的每个数值类型都有几种字符串表示方式，字符串和类型之间的对应关系储存在 typeDict 字典中。下面例子获得与 float64 类型对应的所有键值:</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">&gt;&gt;&gt; </span>[key <span class="hljs-keyword">for</span> key, value <span class="hljs-keyword">in</span> np.typeDict.items() <span class="hljs-keyword">if</span> value <span class="hljs-keyword">is</span> np.float64]</span><br><span class="line">[<span class="hljs-string">'double'</span>, <span class="hljs-string">'d'</span>, <span class="hljs-number">12</span>, <span class="hljs-string">'float64'</span>, <span class="hljs-string">'Float64'</span>, <span class="hljs-string">'f8'</span>, <span class="hljs-string">'float_'</span>, <span class="hljs-string">'float'</span>]</span><br></pre></td></tr></table></figure>
<p>  完整的类型列表通过下面的语句得到。</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">set(np.typeDict.values())</span><br><span class="line">---</span><br><span class="line">&#123;numpy.bool_, numpy.bytes_, numpy.complex128, numpy.complex128,</span><br><span class="line"> numpy.complex64, numpy.datetime64, numpy.float16, numpy.float32,</span><br><span class="line"> numpy.float64, numpy.float64, numpy.int16, numpy.int32,</span><br><span class="line"> numpy.int32, numpy.int64, numpy.int8, numpy.object_,</span><br><span class="line"> numpy.str_, numpy.timedelta64, numpy.uint16, numpy.uint32,</span><br><span class="line"> numpy.uint32, numpy.uint64, numpy.uint8, numpy.void&#125;</span><br></pre></td></tr></table></figure>
<p>  上面显示的数值类型与数组的 dtype 属性是不同的对象。通过 dtype 对象的 type 属性可以获得与其对应的数值类型:</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">&gt;&gt;&gt; </span>c.dtype.type</span><br><span class="line">&lt;<span class="hljs-class"><span class="hljs-keyword">class</span> '<span class="hljs-title">numpy</span>.<span class="hljs-title">int32</span>'&gt;</span></span><br></pre></td></tr></table></figure>
<p>  下面创建一个 16 位(<span class="math inline">\(-2^{15}\sim2^{15}-1\)</span>)的符号整数对象，计算 <span class="math inline">\(200*200\)</span> 会溢出，得到一个负数 <span class="math inline">\(200*200-2^{16}\)</span> 。</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">&gt;&gt;&gt; </span>a = np.int16(<span class="hljs-number">200</span>)</span><br><span class="line"><span class="hljs-meta">&gt;&gt;&gt; </span>a*a</span><br><span class="line">__main__:<span class="hljs-number">1</span>: RuntimeWarning: overflow encountered <span class="hljs-keyword">in</span> short_scalars</span><br><span class="line"><span class="hljs-number">-25536</span></span><br></pre></td></tr></table></figure>
<p>  NumPy 的数值对象的运算速度比 Python 的内置类型的运算速度慢很多，如果程序中需要大量地对单个数值运算，应避免使用 NumPy 的数值对象。</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">v1 = <span class="hljs-number">3.14</span></span><br><span class="line">v2 = np.float64(v1)</span><br><span class="line">%timeit v1*v1</span><br><span class="line">%timeit v2*v2</span><br><span class="line">---</span><br><span class="line"><span class="hljs-number">85.1</span> ns ± <span class="hljs-number">4.1</span> ns per loop (mean ± std. dev. of <span class="hljs-number">7</span> runs, <span class="hljs-number">10000000</span> loops each)</span><br><span class="line"><span class="hljs-number">159</span> ns ± <span class="hljs-number">10.3</span> ns per loop (mean ± std. dev. of <span class="hljs-number">7</span> runs, <span class="hljs-number">10000000</span> loops each)</span><br></pre></td></tr></table></figure>
<p>  使用 astype() 方法可以对数组元素类型进行转换:</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">&gt;&gt;&gt; </span>t1 = np.array([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>], dtype=np.float)</span><br><span class="line"><span class="hljs-meta">&gt;&gt;&gt; </span>t2 = np.array([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>], dtype=np.complex)</span><br><span class="line"><span class="hljs-meta">&gt;&gt;&gt; </span>t3 = t1.astype(np.int32)</span><br><span class="line"><span class="hljs-meta">&gt;&gt;&gt; </span>t4 = t2.astype(np.complex64)</span><br></pre></td></tr></table></figure>
<h2 id="自动生成数组">自动生成数组</h2>
<p>  前面的例子都是先创建一个 Python 的序列对象，然后通过array()将其转换为数组，这样做显然效率不高。因此NumPy 提供了很多专门用于创建数组的函数。</p>
<p>  <a href="https://numpy.org/devdocs/reference/generated/numpy.arange.html" target="_blank" rel="noopener">arange()</a>类似于内置函数 range()，通过指定开始值、终值和步长来创建表示等差数列的一维数组。</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">&gt;&gt;&gt; </span>np.arange(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0.1</span>)</span><br><span class="line">array([<span class="hljs-number">0.</span> , <span class="hljs-number">0.1</span>, <span class="hljs-number">0.2</span>, <span class="hljs-number">0.3</span>, <span class="hljs-number">0.4</span>, <span class="hljs-number">0.5</span>, <span class="hljs-number">0.6</span>, <span class="hljs-number">0.7</span>, <span class="hljs-number">0.8</span>, <span class="hljs-number">0.9</span>])</span><br></pre></td></tr></table></figure>
<p>  <a href="https://numpy.org/devdocs/reference/generated/numpy.linspace.html" target="_blank" rel="noopener">linspace()</a>通过指定开始值、终值和元素个数来创建表示等差数列的一维数组，可通过默认位 True 的 endpoint 参数指定是否包含终值。</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">&gt;&gt;&gt; </span>np.linspace(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">10</span>)</span><br><span class="line">array([<span class="hljs-number">0.</span>        , <span class="hljs-number">0.11111111</span>, <span class="hljs-number">0.22222222</span>, <span class="hljs-number">0.33333333</span>, <span class="hljs-number">0.44444444</span>,</span><br><span class="line">       <span class="hljs-number">0.55555556</span>, <span class="hljs-number">0.66666667</span>, <span class="hljs-number">0.77777778</span>, <span class="hljs-number">0.88888889</span>, <span class="hljs-number">1.</span>        ])</span><br><span class="line"><span class="hljs-meta">&gt;&gt;&gt; </span>np.linspace(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">10</span>, endpoint=<span class="hljs-keyword">False</span>)</span><br><span class="line">array([<span class="hljs-number">0.</span> , <span class="hljs-number">0.1</span>, <span class="hljs-number">0.2</span>, <span class="hljs-number">0.3</span>, <span class="hljs-number">0.4</span>, <span class="hljs-number">0.5</span>, <span class="hljs-number">0.6</span>, <span class="hljs-number">0.7</span>, <span class="hljs-number">0.8</span>, <span class="hljs-number">0.9</span>])</span><br></pre></td></tr></table></figure>
<p>  <a href="https://numpy.org/devdocs/reference/generated/numpy.logspace.html" target="_blank" rel="noopener">logspace()</a>和 linspace()类似，不过创建的是等比数列。下面的例子为从 <span class="math inline">\(10^0\)</span> 到 <span class="math inline">\(10^2\)</span>、有 5 个元素的等比数列。</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">&gt;&gt;&gt; </span>np.logspace(<span class="hljs-number">0</span>, <span class="hljs-number">2</span>, <span class="hljs-number">5</span>)</span><br><span class="line">array([  <span class="hljs-number">1.</span>        ,   <span class="hljs-number">3.16227766</span>,  <span class="hljs-number">10.</span>        ,  <span class="hljs-number">31.6227766</span> ,</span><br><span class="line">       <span class="hljs-number">100.</span>        ])</span><br></pre></td></tr></table></figure>
<p>  基数可以通过 base 参数指定，默认值为 10。下面创建一个比例为 <span class="math inline">\(2^{1/12}\)</span> 的等比数组，其比值为音乐中相差半音的两个音阶之间的频率比值，可用于计算一个八度中所有半音的频率。</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">&gt;&gt;&gt; </span>np.logspace(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">12</span>, base=<span class="hljs-number">2</span>, endpoint=<span class="hljs-keyword">False</span>)</span><br><span class="line">array([<span class="hljs-number">1.</span>        , <span class="hljs-number">1.05946309</span>, <span class="hljs-number">1.12246205</span>, <span class="hljs-number">1.18920712</span>, <span class="hljs-number">1.25992105</span>,</span><br><span class="line">       <span class="hljs-number">1.33483985</span>, <span class="hljs-number">1.41421356</span>, <span class="hljs-number">1.49830708</span>, <span class="hljs-number">1.58740105</span>, <span class="hljs-number">1.68179283</span>,</span><br><span class="line">       <span class="hljs-number">1.78179744</span>, <span class="hljs-number">1.88774863</span>])</span><br></pre></td></tr></table></figure>
<p>  zeros()、ones()、empty()，eye()可以创建指定形状和类型的数组。其中empty()只分配数组所使用的内存，不对数组元素进行初始化操作，因此它的运行速度是最快的。zeros()将元素初始化为 0，ones()将数组元素初始化为 1。</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">&gt;&gt;&gt; </span>np.empty((<span class="hljs-number">2</span>,<span class="hljs-number">3</span>), np.int)</span><br><span class="line">array([[   <span class="hljs-number">4063294</span>,    <span class="hljs-number">2097214</span>, <span class="hljs-number">1469448192</span>],</span><br><span class="line">       [     <span class="hljs-number">32760</span>, <span class="hljs-number">1469454912</span>,      <span class="hljs-number">32760</span>]])</span><br><span class="line"><span class="hljs-meta">&gt;&gt;&gt; </span>np.zeros(<span class="hljs-number">4</span>, np.int)</span><br><span class="line">array([<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>])</span><br></pre></td></tr></table></figure>
<p>  full()将数组元素初始化为指定的值:</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">&gt;&gt;&gt; </span>np.full(<span class="hljs-number">4</span>, np.pi)</span><br><span class="line">array([<span class="hljs-number">3.14159265</span>, <span class="hljs-number">3.14159265</span>, <span class="hljs-number">3.14159265</span>, <span class="hljs-number">3.14159265</span>])</span><br></pre></td></tr></table></figure>
<p>  此外，zeros_like()、ones_like()、empty_like()等函数可创建与参数数组的形状及类型相同的数组。因此，zeros_like(a)和 zeros(a.shape, a.dtype)的效果相同。</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">&gt;&gt;&gt; </span>a = np.arange(<span class="hljs-number">3</span>, dtype=float)</span><br><span class="line"><span class="hljs-meta">&gt;&gt;&gt; </span>np.zeros_like(a)</span><br><span class="line">array([<span class="hljs-number">0.</span>, <span class="hljs-number">0.</span>, <span class="hljs-number">0.</span>])</span><br></pre></td></tr></table></figure>
<p>  <a href="https://numpy.org/devdocs/reference/generated/numpy.frombuffer.html" target="_blank" rel="noopener">frombuffer()</a>、<a href="https://numpy.org/devdocs/reference/generated/numpy.fromstring.html" target="_blank" rel="noopener">fromstring()</a>、<a href="https://numpy.org/devdocs/reference/generated/numpy.fromfile.html" target="_blank" rel="noopener">fromfile()</a>等函数可以从字节序列或文件创建数组，下面以 fromstring()为例介绍它们的用法。Python 的字符串实际上是一个字节序列，每个字符占一个字节，因此如果从字符串s 创建一个 8 位的整数数组，所得到的数组正好就是字符串中每个字符的 ASCII 编码：</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">&gt;&gt;&gt; </span>s = <span class="hljs-string">"abcdefgh"</span></span><br><span class="line"><span class="hljs-meta">&gt;&gt;&gt; </span>np.fromstring(s, dtype=np.int8)</span><br><span class="line">__main__:<span class="hljs-number">1</span>: DeprecationWarning: The binary mode of fromstring <span class="hljs-keyword">is</span> deprecated, <span class="hljs-keyword">as</span> it behaves surprisingly on unicode inputs. Use frombuffer instead</span><br><span class="line">array([ <span class="hljs-number">97</span>,  <span class="hljs-number">98</span>,  <span class="hljs-number">99</span>, <span class="hljs-number">100</span>, <span class="hljs-number">101</span>, <span class="hljs-number">102</span>, <span class="hljs-number">103</span>, <span class="hljs-number">104</span>], dtype=int8)</span><br></pre></td></tr></table></figure>
<p>  如果从字符串 s 创建 16 位的整数数组，那么两个相邻的字节就表示一个整数，把字节 98 和字节 97 当作一个16 位的整数，它的值就是<span class="math inline">\(98*256+97=25185\)</span>。可以看出，16 位的整数是以低位字节在前(little-endian)的方式保存在内存中的。</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">&gt;&gt;&gt; </span>np.fromstring(s, dtype=np.int16)</span><br><span class="line">array([<span class="hljs-number">25185</span>, <span class="hljs-number">25699</span>, <span class="hljs-number">26213</span>, <span class="hljs-number">26727</span>], dtype=int16)</span><br></pre></td></tr></table></figure>
<p>  <a href="https://numpy.org/devdocs/reference/generated/numpy.fromfunction.html" target="_blank" rel="noopener">fromfunction()</a>通过函数创建数组，第一个参数为计算数组元素的函数，第二个参数为 shape。</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">&gt;&gt;&gt; </span>np.fromfunction(<span class="hljs-keyword">lambda</span> i: i % <span class="hljs-number">4</span> + <span class="hljs-number">1</span>, (<span class="hljs-number">10</span>,), dtype=int)</span><br><span class="line">array([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>], dtype=int32)</span><br></pre></td></tr></table></figure>
<h2 id="存取元素">存取元素</h2>
<p>  NumPy 切片语法类似于 Python 列表的标准切片语法，即数组 x 切片获取方式：x[start:stop:step]，因此将数组颠倒即 x[::-1]。除了使用切片存取元素之外，NumPy 还提供了整数列表和布尔数组等下标存取方式。</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">&gt;&gt;&gt; </span>x = np.arange(<span class="hljs-number">10</span>, <span class="hljs-number">1</span>, <span class="hljs-number">-1</span>)</span><br><span class="line"><span class="hljs-meta">&gt;&gt;&gt; </span>a = x[[<span class="hljs-number">3</span>, <span class="hljs-number">3</span>, <span class="hljs-number">-3</span>, <span class="hljs-number">8</span>]]</span><br><span class="line"><span class="hljs-meta">&gt;&gt;&gt; </span>x</span><br><span class="line">array([<span class="hljs-number">10</span>,  <span class="hljs-number">9</span>,  <span class="hljs-number">8</span>,  <span class="hljs-number">7</span>,  <span class="hljs-number">6</span>,  <span class="hljs-number">5</span>,  <span class="hljs-number">4</span>,  <span class="hljs-number">3</span>,  <span class="hljs-number">2</span>])</span><br><span class="line"><span class="hljs-meta">&gt;&gt;&gt; </span>a</span><br><span class="line">array([<span class="hljs-number">7</span>, <span class="hljs-number">7</span>, <span class="hljs-number">4</span>, <span class="hljs-number">2</span>])</span><br></pre></td></tr></table></figure>
<p>  整数序列下标也可以用来修改元素的值：</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">&gt;&gt;&gt; </span>x[[<span class="hljs-number">3</span>, <span class="hljs-number">5</span>, <span class="hljs-number">1</span>]] = <span class="hljs-number">-1</span>, <span class="hljs-number">-2</span>, <span class="hljs-number">-3</span></span><br><span class="line"><span class="hljs-meta">&gt;&gt;&gt; </span>x</span><br><span class="line">array([<span class="hljs-number">10</span>, <span class="hljs-number">-3</span>,  <span class="hljs-number">8</span>, <span class="hljs-number">-1</span>,  <span class="hljs-number">6</span>, <span class="hljs-number">-2</span>,  <span class="hljs-number">4</span>,  <span class="hljs-number">3</span>,  <span class="hljs-number">2</span>])</span><br></pre></td></tr></table></figure>
<p>  当下标是多维数组时，得到的也是多维数组：</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">&gt;&gt;&gt; </span>x[np.array([[<span class="hljs-number">3</span>, <span class="hljs-number">3</span>, <span class="hljs-number">1</span>, <span class="hljs-number">8</span>], [<span class="hljs-number">3</span>, <span class="hljs-number">3</span>, <span class="hljs-number">-3</span>, <span class="hljs-number">8</span>]])]</span><br><span class="line">array([[<span class="hljs-number">-1</span>, <span class="hljs-number">-1</span>, <span class="hljs-number">-3</span>,  <span class="hljs-number">2</span>],</span><br><span class="line">       [<span class="hljs-number">-1</span>, <span class="hljs-number">-1</span>,  <span class="hljs-number">4</span>,  <span class="hljs-number">2</span>]])</span><br><span class="line"><span class="hljs-meta">&gt;&gt;&gt; </span>x[[<span class="hljs-number">3</span>, <span class="hljs-number">3</span>, <span class="hljs-number">1</span>, <span class="hljs-number">8</span>, <span class="hljs-number">3</span>, <span class="hljs-number">3</span>, <span class="hljs-number">-3</span>, <span class="hljs-number">8</span>]].reshape(<span class="hljs-number">2</span>, <span class="hljs-number">4</span>)</span><br><span class="line">array([[<span class="hljs-number">-1</span>, <span class="hljs-number">-1</span>, <span class="hljs-number">-3</span>,  <span class="hljs-number">2</span>],</span><br><span class="line">       [<span class="hljs-number">-1</span>, <span class="hljs-number">-1</span>,  <span class="hljs-number">4</span>,  <span class="hljs-number">2</span>]])</span><br></pre></td></tr></table></figure>
<p>  下面是 bool 数组的例子：</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">&gt;&gt;&gt; </span>x = np.arange(<span class="hljs-number">5</span>, <span class="hljs-number">0</span>, <span class="hljs-number">-1</span>)</span><br><span class="line"><span class="hljs-meta">&gt;&gt;&gt; </span>x[np.array([<span class="hljs-keyword">True</span>, <span class="hljs-keyword">False</span>, <span class="hljs-keyword">True</span>, <span class="hljs-keyword">True</span>, <span class="hljs-keyword">False</span>])]</span><br><span class="line">array([<span class="hljs-number">5</span>, <span class="hljs-number">3</span>, <span class="hljs-number">2</span>])</span><br><span class="line"><span class="hljs-meta">&gt;&gt;&gt; </span>x = np.random.randint(<span class="hljs-number">0</span>, <span class="hljs-number">10</span>, <span class="hljs-number">6</span>)</span><br><span class="line"><span class="hljs-meta">&gt;&gt;&gt; </span>x</span><br><span class="line">array([<span class="hljs-number">0</span>, <span class="hljs-number">8</span>, <span class="hljs-number">5</span>, <span class="hljs-number">7</span>, <span class="hljs-number">7</span>, <span class="hljs-number">0</span>])</span><br><span class="line"><span class="hljs-meta">&gt;&gt;&gt; </span>x[x &gt; <span class="hljs-number">5</span>]</span><br><span class="line">array([<span class="hljs-number">8</span>, <span class="hljs-number">7</span>, <span class="hljs-number">7</span>])</span><br></pre></td></tr></table></figure>
<h2 id="多维数组">多维数组</h2>
<p>  多维数组与一维数组类似，NumPy 采用元组作为数组的下标。</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">&gt;&gt;&gt; </span>a = np.arange(<span class="hljs-number">0</span>, <span class="hljs-number">60</span>, <span class="hljs-number">10</span>).reshape(<span class="hljs-number">-1</span>, <span class="hljs-number">1</span>) + np.arange(<span class="hljs-number">0</span>, <span class="hljs-number">6</span>)</span><br><span class="line"><span class="hljs-meta">&gt;&gt;&gt; </span>a</span><br><span class="line">array([[ <span class="hljs-number">0</span>,  <span class="hljs-number">1</span>,  <span class="hljs-number">2</span>,  <span class="hljs-number">3</span>,  <span class="hljs-number">4</span>,  <span class="hljs-number">5</span>],</span><br><span class="line">       [<span class="hljs-number">10</span>, <span class="hljs-number">11</span>, <span class="hljs-number">12</span>, <span class="hljs-number">13</span>, <span class="hljs-number">14</span>, <span class="hljs-number">15</span>],</span><br><span class="line">       [<span class="hljs-number">20</span>, <span class="hljs-number">21</span>, <span class="hljs-number">22</span>, <span class="hljs-number">23</span>, <span class="hljs-number">24</span>, <span class="hljs-number">25</span>],</span><br><span class="line">       [<span class="hljs-number">30</span>, <span class="hljs-number">31</span>, <span class="hljs-number">32</span>, <span class="hljs-number">33</span>, <span class="hljs-number">34</span>, <span class="hljs-number">35</span>],</span><br><span class="line">       [<span class="hljs-number">40</span>, <span class="hljs-number">41</span>, <span class="hljs-number">42</span>, <span class="hljs-number">43</span>, <span class="hljs-number">44</span>, <span class="hljs-number">45</span>],</span><br><span class="line">       [<span class="hljs-number">50</span>, <span class="hljs-number">51</span>, <span class="hljs-number">52</span>, <span class="hljs-number">53</span>, <span class="hljs-number">54</span>, <span class="hljs-number">55</span>]])</span><br><span class="line">---</span><br><span class="line">a[<span class="hljs-number">0</span>, <span class="hljs-number">3</span>:<span class="hljs-number">5</span>]     a[<span class="hljs-number">4</span>:, <span class="hljs-number">4</span>:]        a[:, <span class="hljs-number">2</span>]                         a[<span class="hljs-number">2</span>::<span class="hljs-number">2</span>, ::<span class="hljs-number">2</span>]</span><br><span class="line">array([<span class="hljs-number">3</span>, <span class="hljs-number">4</span>]) array([[<span class="hljs-number">44</span>, <span class="hljs-number">45</span>], array([ <span class="hljs-number">2</span>, <span class="hljs-number">12</span>, <span class="hljs-number">22</span>, <span class="hljs-number">32</span>, <span class="hljs-number">42</span>, <span class="hljs-number">52</span>]) array([[<span class="hljs-number">20</span>, <span class="hljs-number">22</span>, <span class="hljs-number">24</span>],</span><br><span class="line">                     [<span class="hljs-number">54</span>, <span class="hljs-number">55</span>]])                                       [<span class="hljs-number">40</span>, <span class="hljs-number">42</span>, <span class="hljs-number">44</span>]])</span><br></pre></td></tr></table></figure>
<p>  如果下标元组中只包含整数和切片，那么得到的数组和原始数组共享数据，它是原数组的视图。下面的例子中，数组 b 是 a 的视图，它们共享数据，因此修改 b[0]时，数组 a 中对应的元素也被修改：</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">&gt;&gt;&gt; </span>b = a[<span class="hljs-number">0</span>, <span class="hljs-number">3</span>:<span class="hljs-number">5</span>]</span><br><span class="line"><span class="hljs-meta">&gt;&gt;&gt; </span>b[<span class="hljs-number">0</span>] = -b[<span class="hljs-number">0</span>]</span><br><span class="line"><span class="hljs-meta">&gt;&gt;&gt; </span>a[<span class="hljs-number">0</span>, <span class="hljs-number">3</span>:<span class="hljs-number">5</span>]</span><br><span class="line">array([<span class="hljs-number">-3</span>,  <span class="hljs-number">4</span>])</span><br></pre></td></tr></table></figure>
<p>  因为数组的下标是一个元组，所以我们可以将下标元组保存起来，用同一个元组存取多个数组。下面的例子中，a[idx]和 a[::2, 2:]相同，a[idx][idx]和 a[::2, 2:][::2, 2:]相同。</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">&gt;&gt;&gt; </span>idx = slice(<span class="hljs-keyword">None</span>, <span class="hljs-keyword">None</span>, <span class="hljs-number">2</span>), slice(<span class="hljs-number">2</span>, <span class="hljs-keyword">None</span>)</span><br><span class="line"><span class="hljs-meta">&gt;&gt;&gt; </span>a[idx]</span><br><span class="line">array([[ <span class="hljs-number">2</span>, <span class="hljs-number">-3</span>,  <span class="hljs-number">4</span>,  <span class="hljs-number">5</span>],</span><br><span class="line">       [<span class="hljs-number">22</span>, <span class="hljs-number">23</span>, <span class="hljs-number">24</span>, <span class="hljs-number">25</span>],</span><br><span class="line">       [<span class="hljs-number">42</span>, <span class="hljs-number">43</span>, <span class="hljs-number">44</span>, <span class="hljs-number">45</span>]])</span><br><span class="line"><span class="hljs-meta">&gt;&gt;&gt; </span>a[idx][idx]</span><br><span class="line">array([[ <span class="hljs-number">4</span>,  <span class="hljs-number">5</span>],</span><br><span class="line">       [<span class="hljs-number">44</span>, <span class="hljs-number">45</span>]])</span><br></pre></td></tr></table></figure>
<p>  用 Python 内置的 slice() 函数创建下标比较麻烦，因此 NumPy 提供了一个 s_对象来帮助我们创建数组下标，s_实际上是 IndexExpression 类的一个对象：</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">&gt;&gt;&gt; </span>np.s_[::<span class="hljs-number">2</span>, <span class="hljs-number">2</span>:]</span><br><span class="line">(slice(<span class="hljs-keyword">None</span>, <span class="hljs-keyword">None</span>, <span class="hljs-number">2</span>), slice(<span class="hljs-number">2</span>, <span class="hljs-keyword">None</span>, <span class="hljs-keyword">None</span>))</span><br></pre></td></tr></table></figure>
<p>  在多维数组的下标元组中，也可以使用整数元组或列表、整数数组和布尔数组。当在下标中使用这些对象时，所获得的数据是原始数据的副本，因此修改结果数组不会改变原始数组。</p>
<p><img src="/Python/Python-NumPy/Python_NumPy1.jpg"></p>
<h2 id="结构数组">结构数组</h2>
<p>  在C语言中可以通过 struct 关键字定义结构类型，结构中的字段占据连续的内存空间。类型相同的两个结构体所占用的内存大小相同，因此可以很容易定义结构数组。与C语言类似，NumPy 中也很容易对这种结构数组进行操作。</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">persontype = np.dtype(&#123;</span><br><span class="line">    <span class="hljs-string">'names'</span>:[<span class="hljs-string">'name'</span>, <span class="hljs-string">'age'</span>, <span class="hljs-string">'weight'</span>],</span><br><span class="line">    <span class="hljs-string">'formats'</span>:[<span class="hljs-string">'S32'</span>,<span class="hljs-string">'i'</span>, <span class="hljs-string">'f'</span>]&#125;, align=<span class="hljs-keyword">True</span>)</span><br><span class="line">a = np.array([(<span class="hljs-string">"Zhang"</span>, <span class="hljs-number">32</span>, <span class="hljs-number">75.5</span>), (<span class="hljs-string">"Wang"</span>, <span class="hljs-number">24</span>, <span class="hljs-number">65.2</span>)], </span><br><span class="line">             dtype = persontype)</span><br></pre></td></tr></table></figure>
<h1 id="ufunc-函数">ufunc 函数</h1>
</div><div class="post-copyright"><script type="text/javascript" src="/js/copyright.js" successtext="复制成功!"></script><link rel="stylesheet" type="text/css" href="/css/copyright.css"><!--pspan= __('copyright_title_prefix')
= page.title--><p><span>文章作者：</span>wtyang</p><!--pspan= __('copyright_date_prefix')
= page.date.format(config.date_format)--><!--pspan= __('copyright_update_prefix')
= page.updated.format(config.date_format)--><p><span>原始链接：</span><a href="/Python/Python-NumPy/">https://2inf.github.io/Python/Python-NumPy/</a><span class="copy-path"><i class="fa fa-clipboard" data-clipboard-text="https://2inf.github.io/Python/Python-NumPy/"></i></span></p><p><span>版权声明：</span>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank" rel="noopener">知识共享署名-非商业性使用-禁止演绎 4.0 国际许可协议</a> 许可协议。转载请注明出处！</p></div><br><div class="tags"><a href="/tags/NumPy/"><i class="fa fa-tag"></i>NumPy</a></div><div class="post-nav"><a class="next" href="/Algorithm/Learing-Segment-Tree/">线段树学习</a></div></div></div></div><div class="pure-u-1 pure-u-md-4-4"><div id="footer">Copyright © 2020 <a href="/." rel="nofollow">2inf.</a>&nbsp;|&nbsp;
<a href="/atom.xml" target="_blank"><i class="fa fa-rss"></i>&nbsp;RSS Feed</a><div><link rel="stylesheet" type="text/css" href="/css/badge.css"/><div class="github-badge"><a rel="nofollow" target="_blank" href="https://hexo.io"><span class="badge-subject">Powered by</span><span class="badge-value bg-blue">Hexo</span></a></div>
<div class="github-badge"> <a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"><span class="badge-subject">Theme</span><span class="badge-value bg-orange">maupassant</span></a></div>
<div class="github-badge"> <a rel="nofollow" target="_blank" href="https://www.cnblogs.com/2inf/"><span class="badge-subject">cnblogs</span><span class="badge-value bg-blueviolet">2inf</span></a></div></div></div></div></div><div class="post-toc"><div class="post-toc-wrap"><div class="post-toc" id="toc"><div class="toc-title">文章目录</div><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#ndarray-对象"><span class="toc-number">1.</span> <span class="toc-text">ndarray 对象</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#创建"><span class="toc-number">1.1.</span> <span class="toc-text">创建</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#元素类型"><span class="toc-number">1.2.</span> <span class="toc-text">元素类型</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#自动生成数组"><span class="toc-number">1.3.</span> <span class="toc-text">自动生成数组</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#存取元素"><span class="toc-number">1.4.</span> <span class="toc-text">存取元素</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#多维数组"><span class="toc-number">1.5.</span> <span class="toc-text">多维数组</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#结构数组"><span class="toc-number">1.6.</span> <span class="toc-text">结构数组</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#ufunc-函数"><span class="toc-number">2.</span> <span class="toc-text">ufunc 函数</span></a></li></ol></div></div><div class="post-toc-toggle-wrap open" id="right-toggle"><div class="post-toc-toggle-first post-toc-toggle"></div><div class="post-toc-toggle-second post-toc-toggle"></div><div class="post-toc-toggle-thrid post-toc-toggle"></div></div><script type="text/javascript" src="/js/sidebar.js?v=0.0.0" async></script></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.jsdelivr.net/gh/fancyapps/fancybox/dist/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox/dist/jquery.fancybox.min.css"><script type="text/javascript" src="/js/copycode.js" successtext="复制成功!"></script><link rel="stylesheet" type="text/css" href="/css/copycode.css"><script type="text/x-mathjax-config">MathJax.Hub.Config({
  tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}
  });
</script><!--script(type='text/javascript', src='https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML', async)--><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML" async></script><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script><script>hljs.initHighlightingOnLoad();</script><script type="text/javascript" src="/js/app.js?v=0.0.0"></script></div></body></html>